# Lecture 06 â€“ Database Schema & Models (Mongoose)

## Overview
Is lecture mein hum:
- MongoDB database setup karte hain
- MongoDB Compass use karte hain
- Database schema aur models design karte hain
- Backend ko database se connect karte hain using Mongoose
- User data API ke through database mein insert karte hain

---

## Database Tool Used
**MongoDB Atlas** â€“ Cloud-based MongoDB service  
**MongoDB Compass** â€“ GUI tool to visualize databases, collections, and documents

---

## MongoDB Compass â€“ Account & Cluster Setup (Hinglish Steps)

### Step 1: MongoDB Atlas Account
- MongoDB Atlas website par jao
- Sign up / login karo
- New **Project** create karo  
  ðŸ‘‰ Project name: **gittogether**

---

### Step 2: Create a Cluster
- â€œBuild a Databaseâ€ par click karo
- Free tier (Shared Cluster) select karo
- Cloud provider & region choose karo
- Cluster create hone ka wait karo

---

### Step 3: Database Access
- Database Access section mein jao
- New database user create karo
- Username & password set karo
- Permissions: **Read and Write**

---

### Step 4: Network Access
- Network Access section mein jao
- IP Address allow karo
- Development ke liye:
  - `0.0.0.0/0` (allow from anywhere)

---

### Step 5: Get Connection String
- Cluster ke â€œConnectâ€ button par click karo
- Choose: **Connect your application**
- Driver: **Node.js**
- Connection string copy karo

Example format:


ðŸ‘‰ Yahan:
- Database name: **gittogether**
- Project name: **gittogether**

---

## Connecting MongoDB Compass
- MongoDB Compass open karo
- â€œNew Connectionâ€ par click karo
- Connection string paste karo
- Connect button dabao

ðŸ‘‰ Ab aap apna database visually dekh sakte ho

---

## Database Structure (Current)
- **Database Name:** gittogether
- **Collection Name:** users

> MongoDB mein:
- Collections â‰ˆ Tables  
- Documents â‰ˆ Rows  

---

## Why Mongoose?
**Mongoose** ek ODM (Object Data Modeling) library hai jo:
- MongoDB aur Node.js ke beech bridge ka kaam karti hai
- Schema define karne mein help karti hai
- Data validation aur structure enforce karti hai

---

## Database Schema Design

### User Collection (Initial Fields)
- firstName
- lastName
- emailId
- password
- age
- gender

ðŸ‘‰ Ye fields milkar **User Schema** banate hain

---

## Why Schema is Important?
- Data consistent rehta hai
- Validation possible hoti hai
- Bugs kam hote hain
- Production systems mein schema changes minimum hone chahiye

MongoDB flexible hai,  
lekin **LLD ke time schema carefully design karna bahut important hai**

---

## Config Folder & Database File
- Backend mein ek **config** folder banate hain
- Uske andar file hoti hai:
  - `database.js`

Is file ka kaam:
- MongoDB connection logic rakhna
- Single responsibility: database connect karna

---

## connectDB Function
- `database.js` se ek function export hota hai: `connectDB()`
- Ye function:
  - MongoDB se connection establish karta hai
  - Server start hone se pehle call hota hai

---

## Correct Flow (Very Important)
ðŸ‘‰ **Pehle database connect hoga**  
ðŸ‘‰ **Uske baad server listen karega**

Flow:
1. `connectDB()` call
2. Database successfully connect
3. `app.listen()` call

Isse:
- Server bina database ke start nahi hota
- Runtime errors avoid hote hain

---

## Creating Models Folder & User Schema

### Step 1: Create `models` Folder
- Backend root ke andar ek folder banao: `models`
- Is folder mein saare database models rahenge

---

### Step 2: Create `user.js` inside `models`

```js
const mongoose = require("mongoose");

const userSchema = new mongoose.Schema({
    firstName: {
        type: String
    },
    lastName: {
        type: String
    },
    emailId: {
        type: String
    },
    password: {
        type: String
    },
    age: {
        type: Number
    },
    gender: {
        type: String
    }
});

module.exports = mongoose.model("User", userSchema);
